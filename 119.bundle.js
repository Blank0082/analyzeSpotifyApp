"use strict";(self.webpackChunkanalyze_spotify_app=self.webpackChunkanalyze_spotify_app||[]).push([[119],{4119:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(7767),o=n(6540),a=n(1087),s=n(4285),c=n(4848);function i(){const e=(0,r.Zp)(),[t,n]=(0,o.useState)(null),[i,l]=(0,o.useState)(!1);(0,o.useEffect)((()=>{i||(d().then(),l(!0));const n=t=>{"authorized"===t.data.type?e("/playlists"):"AUTH_ERROR"===t.data.type&&e("/")},r=setInterval((()=>{t&&t.closed&&(clearInterval(r),l(!1),e("/"))}),1e3);return window.addEventListener("message",n,!1),()=>{window.removeEventListener("message",n,!1),clearInterval(r)}}),[e,t]);const d=async()=>{const e=(()=>{const e=new Uint32Array(28);return window.crypto.getRandomValues(e),Array.from(e,(e=>("0"+e.toString(16)).slice(-2))).join("")})(),t=(r=await(async e=>{const t=await crypto.subtle.digest("SHA-256",e);return new Uint8Array(t)})((new TextEncoder).encode(e)),btoa(String.fromCharCode.apply(null,r)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""));var r;localStorage.setItem("code_verifier",e);const o=new URL("https://accounts.spotify.com/authorize");if(o.search=new URLSearchParams({client_id:a.A.client_id,response_type:"code",redirect_uri:a.A.redirect_uri,code_challenge_method:"S256",code_challenge:t,scope:a.A.scope}).toString(),(0,s.A)())window.location.href=o.toString();else{const e=window.open(o.toString(),"_blank");n(e)}};return(0,c.jsx)("div",{})}},1087:(e,t,n)=>{n.d(t,{A:()=>r});const r={redirect_uri:process.env.REACT_APP_REDIRECT_URI,client_id:process.env.REACT_APP_CLIENT_ID,scope:process.env.REACT_APP_SCOPE}},4285:(e,t,n)=>{function r(){return/Mobi|Android/i.test(navigator.userAgent)}n.d(t,{A:()=>r})}}]);