"use strict";(self.webpackChunkanalyze_spotify_app=self.webpackChunkanalyze_spotify_app||[]).push([[158],{7151:(n,e,t)=>{t.r(e),t.d(e,{default:()=>N});var o=t(6540),a=t(9611),i=t(5072),l=t.n(i),r=t(7825),s=t.n(r),c=t(7659),m=t.n(c),d=t(5056),p=t.n(d),u=t(540),g=t.n(u),f=t(1113),b=t.n(f),h=t(7822),x={};function y(n){const e=`https://open.spotify.com/embed/track/${n.split(":")[2]}`;return o.createElement("iframe",{title:"Spotify Music Player",src:e,allowtransparency:"true"})}function v(n){let{playlist:e,token:t,isOpen:a,onToggle:i,playingUri:l,setPlayingUri:r}=n;const[s,c]=(0,o.useState)([]),[m,d]=(0,o.useState)();return o.createElement("div",{className:"playlist-item"},o.createElement("button",{onClick:async()=>{if(a||0!==s.length)r(null);else{const n=await fetch(`https://api.spotify.com/v1/playlists/${e.id}/tracks`,{headers:{Authorization:`Bearer ${t}`}}),o=await n.json();d(o.total),c(o.items.map((n=>({name:n.track.name,artist:n.track.artists.map((n=>n.name)).join(", "),imageUrl:n.track.album.images[0].url,uri:n.track.uri}))))}i(e.id)},className:"playlist-button"},e.images&&o.createElement("img",{src:e.images[0].url,alt:e.name}),o.createElement("div",{style:{color:"white"}},e.name)),a&&o.createElement("div",{className:"playlist-container"},o.createElement("div",{className:"songTotal"},"總共",m,"首歌曲，點擊下一步即可幫你尋找你可能喜歡的歌曲！"),m>0?o.createElement("div",{className:"songs-list"},s.map(((n,e)=>o.createElement("div",{key:e,className:"song-item"},o.createElement("img",{src:n.imageUrl,alt:n.name}),o.createElement("div",{className:"song-info"},o.createElement("p",null,n.name),o.createElement("p",null,n.artist),o.createElement("button",{onClick:()=>{return e=n.uri,void r(l===e?null:e);var e},className:"button "+(l===n.uri?"playing":"")},l===n.uri?"取消":"試聽"),l===n.uri&&y(n.uri)))))):null,m>0&&o.createElement("button",{onClick:()=>(async n=>{const e=await fetch("http://localhost:3001/predict",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),t=await e.json();sessionStorage.setItem("recommendedSongs",JSON.stringify(t.return)),console.log(t)})(e.id),className:"button next-button"},"下一步")))}x.styleTagTransform=b(),x.setAttributes=p(),x.insert=m().bind(null,"head"),x.domAPI=s(),x.insertStyleElement=g(),l()(h.A,x),h.A&&h.A.locals&&h.A.locals;var k=t(7767),w=t(761),E={};function A(n){let{isOpen:e,onClose:t}=n;const[a,i]=(0,o.useState)([]),[l,r]=(0,o.useState)(0);return(0,o.useEffect)((()=>{if(e){const n=JSON.parse(sessionStorage.getItem("recommendedSongs")||"[]");i(n)}}),[e]),o.createElement("div",{className:"modal "+(e?"open":"closed")},o.createElement("button",{onClick:t},"關閉"),o.createElement("div",{className:"songs-container"},a.length>0?o.createElement(o.Fragment,null,o.createElement("div",null,"已推薦",a.length,"首歌曲，目前在第",l+1,"首歌曲。"),y(a[l]),o.createElement("div",{className:"navigation-buttons"},o.createElement("button",{onClick:()=>{r((n=>n>0?n-1:a.length-1))}},"上一首"),o.createElement("button",{onClick:()=>{r((n=>n<a.length-1?n+1:0))}},"下一首"))):o.createElement("div",null,"目前沒有推薦任何歌曲，請先選擇你的播放清單。")))}function N(){const n=(0,k.Zp)(),[e,t]=(0,o.useState)([]),[i,l]=(0,o.useState)(null),[r,s]=(0,o.useState)(null),c=localStorage.getItem("access_token"),[m,d]=(0,o.useState)(!1),p=(0,o.useCallback)((()=>{fetch("https://api.spotify.com/v1/me/playlists",{headers:{Authorization:`Bearer ${c}`}}).then((e=>{if(e.ok)return e.json();throw 401===e.status?(n("/login"),localStorage.removeItem("token"),new Error("Unauthorized")):new Error("Failed to fetch playlists")})).then((n=>t(n.items))).catch((n=>{console.error(n),t(null)}))}),[c,n]),u=n=>{l(i===n?null:n)};return(0,o.useEffect)((()=>{if(!c)return void n("/login");p();const e=setInterval(p,6e5);return()=>clearInterval(e)}),[c,n,p]),o.createElement("div",null,o.createElement(a.A,{showRecommended:()=>d(!0)}),o.createElement("div",{className:"list-container"},o.createElement("h2",null,"Your Playlists"),"點擊圖片選擇你的音樂清單。",e&&e.length>0?e.map((n=>o.createElement(v,{key:n.id,playlist:n,token:c,isOpen:n.id===i,onToggle:u,playingUri:r,setPlayingUri:s}))):o.createElement("div",null,"No playlists found.")),o.createElement(A,{isOpen:m,onClose:()=>d(!1)}))}E.styleTagTransform=b(),E.setAttributes=p(),E.insert=m().bind(null,"head"),E.domAPI=s(),E.insertStyleElement=g(),l()(w.A,E),w.A&&w.A.locals&&w.A.locals},9611:(n,e,t)=>{t.d(e,{A:()=>v});var o=t(6540),a=t(4976),i=t(5072),l=t.n(i),r=t(7825),s=t.n(r),c=t(7659),m=t.n(c),d=t(5056),p=t.n(d),u=t(540),g=t.n(u),f=t(1113),b=t.n(f),h=t(8600),x={};x.styleTagTransform=b(),x.setAttributes=p(),x.insert=m().bind(null,"head"),x.domAPI=s(),x.insertStyleElement=g(),l()(h.A,x),h.A&&h.A.locals&&h.A.locals;const y=t.p+"fdebcf1ad00e6b94a71d.jpg";function v(n){let{showRecommended:e}=n;return o.createElement("nav",null,o.createElement("div",{className:"logo-container"},o.createElement("img",{alt:"",className:"logo_img",src:y}),o.createElement(a.N_,{to:"/login",className:"btn_style"},"登入"),e&&o.createElement("button",{className:"btn_style",onClick:e},"已推薦歌曲"),o.createElement(a.N_,{to:"/playlists",className:"btn_style"},"推薦歌曲"),o.createElement(a.N_,{to:"/",className:"btn_style"},"首頁")))}},7822:(n,e,t)=>{t.d(e,{A:()=>r});var o=t(1601),a=t.n(o),i=t(6314),l=t.n(i)()(a());l.push([n.id,".playlist-item {\n    display: flex;\n    align-items: flex-start;\n    margin-bottom: 20px;\n}\n\n.playlist-button {\n    display: block;\n    text-align: left;\n    cursor: pointer;\n    background: none;\n    border: none;\n}\n\n.playlist-button img {\n    width: 320px;\n    height: 320px;\n    object-fit: cover;\n}\n\n.songs-list {\n    flex-grow: 1;\n    overflow-y: auto; /* 允许在歌曲列表内滚动 */\n    max-height: 320px; /* 调整高度以适应内容 */\n    margin-left: 20px; /* 添加间距 */\n    padding: 10px;\n    margin-bottom: 1px; /* Space for the 'next' button */\n}\n.song-item {\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n    justify-content: space-between; /* Push content to each end */\n}\n\n.song-item img {\n    width: 100px;\n    height: 100px;\n    object-fit: cover;\n    margin-right: 10px;\n}\n.song-info {\n    flex-grow: 1;\n    margin-right: 10px;\n}\n.song-info p {\n    margin: 0;\n}\n/* 公共按鈕樣式 */\n.button {\n    padding: 10px 15px;\n    border: none;\n    background-color: #1db954; /* Spotify綠色 */\n    color: white;\n    border-radius: 20px;\n    cursor: pointer;\n    outline: none;\n    font-size: 16px;\n    transition: background-color 0.3s ease;\n}\n\n.button:hover {\n    background-color: #1ed760; /* 深一點的Spotify綠色 */\n}\n\n/* 按鈕被點擊時的動畫 */\n@keyframes button-click {\n    0% {\n        transform: scale(1);\n    }\n    50% {\n        transform: scale(0.95);\n    }\n    100% {\n        transform: scale(1);\n    }\n}\n\n.button:active {\n    animation: button-click 0.1s;\n}\n.playing {\n    background-color: #d50b0b; /* 暗色背景 */\n}\n\n.playlist-container {\n    display: flex;\n    flex-direction: column;\n    position: relative;\n    margin-left: 20px; /* Distance between playlist and songs list */\n    flex-grow: 1; /* Let the container fill the remaining space */\n    max-height: 330px; /* Maximum height of the container */\n}\n.next-button {\n    bottom: 0;\n}\n.songTotal{\n    font-size: 14px;\n    color: white;\n    margin-bottom: 2px;\n}\niframe {\n    width: 100%; /* Full width of its container */\n    max-height: 80px; /* Adjust as needed */\n}",""]);const r=l},761:(n,e,t)=>{t.d(e,{A:()=>r});var o=t(1601),a=t.n(o),i=t(6314),l=t.n(i)()(a());l.push([n.id,"/* RecommendedSongsModal.css */\ndiv {\n    color: white;\n}\n\n.modal {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.7);\n    z-index: 1000;\n    justify-content: center;\n    align-items: center;\n    overflow-y: auto;\n    display: flex;\n    flex-direction: column;\n    padding: 20px;\n}\n\n.modal.open {\n    display: flex;\n}\n\n.modal .songs-container {\n    padding-right: 10px; /* 防止內容與滾動條靠太近 */\n    display: flex;\n    flex-direction: column;\n    align-items: center; /* 確保歌曲在容器中居中 */\n    max-height: 80vh; /* 使用vh單位來限制最大高度 */\n    overflow-y: auto;\n}\n\n.modal .song {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 10px 0;\n    width: 100%;\n    max-width: 500px; /* 設置一個最大寬度 */\n    margin-bottom: 10px;\n}\n\n.modal .navigation-buttons {\n    display: flex;\n    gap: 10px;\n    margin-top: 10px;\n    justify-content: space-around;\n    width: 100%;\n    max-width: 500px;\n}\n\n.modal button {\n    padding: 8px 16px;\n    background-color: #1db954;\n    color: white;\n    border: none;\n    border-radius: 20px;\n    cursor: pointer;\n    outline: none;\n    font-size: 0.9rem;\n}\n\n.modal button:hover {\n    background-color: #1ed760;\n}\n\n.modal button:active {\n    transform: scale(0.98);\n}\n\n.spotify-player {\n    width: 100%;\n    margin: 10px 0;\n}\n\n.navigation-buttons button {\n    background-color: #1db954;\n    color: white;\n    border: none;\n    cursor: pointer;\n    padding: 10px 20px;\n    margin: 0 5px;\n    border-radius: 20px;\n    font-weight: bold;\n    text-transform: uppercase;\n    transition: background-color 0.3s;\n}\n\n.navigation-buttons button:hover {\n    background-color: #17a74b;\n}\n\n/* 如果需要特殊標示當前播放的歌曲 */\n.song-item.playing {\n    border-left: 5px solid #1db954;\n    padding-left: 10px;\n}\n\n/* 如果需要動畫效果 */\n@keyframes fadeIn {\n    from {\n        opacity: 0;\n    }\n    to {\n        opacity: 1;\n    }\n}\n\n.modal.open {\n    animation: fadeIn 0.3s;\n}\n\n@media (max-width: 600px) {\n    .modal .song {\n        flex-direction: column;\n        align-items: center;\n    }\n\n    .modal .songs-container {\n        max-height: 70vh;\n    }\n\n    .modal .navigation-buttons {\n        flex-direction: column;\n    }\n}\n.modal {\n    overflow: hidden;\n}",""]);const r=l},8600:(n,e,t)=>{t.d(e,{A:()=>p});var o=t(1601),a=t.n(o),i=t(6314),l=t.n(i),r=t(4417),s=t.n(r),c=new URL(t(6584),t.b),m=l()(a()),d=s()(c);m.push([n.id,`.background_container{\n    display:flex;\n    align-items:center;\n    justify-content:center;\n    background-size: cover;\n    background-position: center;\n    background-image: url(${d});\n    height: 400px;\n    width: 100%;\n    margin: 80px 0 0 0;\n}\n\n.list-container{\n    margin: 60px 0 0 0;\n    color:white;\n}\n\n.logo-container {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 60px;\n    background-color: black;\n    opacity: 0.7;\n    backdrop-filter: blur(5px);\n    position: fixed;\n    transition: opacity 0.3s ease;\n    margin: 0 0 80px 0 ;\n}\n\n.logo-container:hover {\n    opacity: 1;\n    backdrop-filter: blur(5px);\n}\n\n.logo_img {\n    width: 70px;\n    height: 60px;\n    cursor: pointer;\n}\n\n\n.btn_style {\n    margin: 0 50px 0 0;\n    padding: 15px 0 12.5px 0;\n    display: inline-block;\n    float: right;\n    color: white;\n    text-align: center;\n    text-decoration: none;\n    font-size: 18px;\n    border: none;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n    transition: transform 0.3s;\n}\nbutton{\nbackground-color: black;\n}\n\n.btn_style ::before {\n    content: '';\n    position: absolute;\n    top: 5px;\n    right: -5px;\n    bottom: 5px;\n    left: -5px;\n    background: #2671a3;\n    transform: skew(-15deg);\n    z-index: -1;\n}\n\n.btn_style:hover {\n    transform: scale(1.1);\n    border-bottom: orange 3px solid;\n}\n\n.first_p{\n    position: absolute;\n    top: 70%;\n    left: -100%;\n    white-space: nowrap;\n    font-size: 32px;\n    color: #fff;\n    animation: slideIn 2s forwards;\n}\n\n@keyframes slideIn {\n    to {\n        left: 25%; /* 文本最终位置在屏幕中间 */\n    }\n}`,""]);const p=m},6584:(n,e,t)=>{n.exports=t.p+"1aee1799715143d92617.jpg"}}]);