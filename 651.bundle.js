"use strict";(self.webpackChunkanalyze_spotify_app=self.webpackChunkanalyze_spotify_app||[]).push([[651],{1651:(e,t,o)=>{o.r(t),o.d(t,{default:()=>d});var r=o(7767),n=o(6540),a=o(1087),s=o(4285),c=o(4848);const i={get access_token(){return localStorage.getItem("access_token")||null},save:function(e){const{access_token:t,refresh_token:o}=e;localStorage.setItem("access_token",t),localStorage.setItem("refresh_token",o)}};function d(){const e=(0,r.Zp)();(0,n.useEffect)((()=>{if(window.opener||(0,s.A)()){const o=new URLSearchParams(window.location.search),r=o.get("code"),n=o.get("error");r?t(r).then((t=>{t&&t.access_token&&(i.save(t),window.opener&&(window.opener.postMessage({type:"authorized"},"*"),window.close()),e("/playlists"))})).catch((t=>{console.error("Error fetching access token:",t),window.opener&&(window.opener.postMessage({type:"AUTH_ERROR",error:t},"*"),window.close()),e("/")})):n&&(window.opener&&(window.opener.postMessage({type:"AUTH_ERROR",error:n},"*"),window.close()),e("/"))}else e("/")}),[e]);const t=async e=>{const t=localStorage.getItem("code_verifier"),o=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:a.A.client_id,grant_type:"authorization_code",code:e,redirect_uri:a.A.redirect_uri,code_verifier:t})});return await o.json()};return(0,c.jsx)("div",{children:"Loading..."})}},1087:(e,t,o)=>{o.d(t,{A:()=>r});const r={redirect_uri:"https://blank0082.github.io/analyzeSpotifyApp/#/callback",client_id:"ebf1bf4571374afa83e28c5c465bf0e6",scope:"user-read-private user-read-email playlist-read-private user-library-read"}},4285:(e,t,o)=>{function r(){return/Mobi|Android/i.test(navigator.userAgent)}o.d(t,{A:()=>r})}}]);